<!DOCTYPE html>
<html lang="pt_BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function ehSinal(str) {
            switch (str) {
                case '+':
                case '-':
                case '*':
                case '/':
                case '%':
                    return true;
                default:
                    return false;
            }
        }
        function zerarVisor() {
            let visor = document.querySelector('#visor');
            visor.innerText = '';
        }
        function adicionarNoVisor(valor) {
            let visor = document.querySelector('#visor');
            if (visor.innerText === 'Error') {
                zerarVisor()
            }
            if(ehSinal(valor) && ehSinal(visor.innerText.slice(-1))){ apagarUltimo()}
            visor.innerText += valor;
        }
        function apagarUltimo() {
            let visor = document.querySelector('#visor');
            if (visor.innerText === 'Error') {
                zerarVisor()
            }
            textoVisor = visor.innerText;
            visor.innerText = textoVisor.slice(0, textoVisor.length - 1);
        };
        function calcularResultado() {
            let visor = document.querySelector('#visor');
            try {
                if (visor.innerText === 'Error') {
                    return zerarVisor()
                }
                visor.innerText = eval(visor.innerText)
            } catch {
                visor.innerText = 'Error'
            }
            if (visor.innerText === 'undefined' || visor.innerText === '=') {
                return zerarVisor()
            }
        }

    </script>
</head>

<body>
    <div id="corpo">
        <div id="visor"></div>
        <div class="botoes">
            <div class="botao verde" onclick="apagarUltimo()">C</div>
            <div class="botao verde" onclick="zerarVisor()">CE</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">(</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">)</div>
        </div>
        <div class="botoes">
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">7</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">8</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">9</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">+</div>
        </div>
        <div class="botoes">
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">4</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">5</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">6</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">-</div>
        </div>
        <div class="botoes">
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">1</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">2</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">3</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">*</div>
        </div>
        <div class="botoes">
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">0</div>
            <div class="botao" onclick="adicionarNoVisor(this.innerText)">.</div>
            <div class="botao verde" onclick="calcularResultado()">=</div>
            <div class="botao verde" onclick="adicionarNoVisor(this.innerText)">/</div>
        </div>
    </div>
</body>

</html>